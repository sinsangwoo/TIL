# 2026-02-18

- [Project] Python mini OS simulator

## 📅 37일 차: 페이지 교체 (FIFO) 구현 

### 🎯 오늘의 목표
1. 할당 순서 기록: MemoryManager에 fifo_queue를 도입하여, 어떤 페이지가 메모리에 먼저 들어왔는지 '선입선출(FIFO)' 순서를 기억한다.
2. 페이지 교체 실행: 새로운 프로세스가 들어올 자리가 없을 때, replace_page를 통해 가장 오래된 페이지를 쫓아내는 Swap Out 로직을 완성한다.

### 📝 배운 점 (TIL)
* **희생자 선정:** 누군가를 죽여야 내가 산다. fifo_queue에서 가장 먼저 들어온 페이지를 popleft()로 뽑아내어 빈 자리를 만드는 과정을 이해함.

* **Valid 비트 갱신:** 쫓겨난 페이지는 valid=False로 바꿔줘야 한다. 

* **메모리 기록의 중요성:** Memory 객체에 set_frame을 통해 실제 사용 중임을 마킹하지 않으면, OS가 빈 자리를 못 찾고 엉뚱한 로직을 수행하게 된다는 것을 배움.

### 💥 트러블 슈팅 
* 1. 데이터 구조 불일치 (TypeError)
문제: 페이지 테이블의 엔트리가 딕셔너리({'pfn': 0, ...})인데, 이를 숫자(int)처럼 다루려다 프로그램이 멈춤.
해결: entry['pfn']으로 실제 프레임 번호만 정확히 추출하도록 수정. 

* 2. 자승자박 OOM (Logic Error)
문제: 4개의 프레임을 할당받는 도중, 자기가 방금 채운 프레임 때문에 "빈 공간이 없다"고 판단하여 스스로 중단됨.
해결: 빈 공간이 없으면 그 즉시 교체 로직(replace_page)을 호출하여 자리를 만들며 진행하도록 allocate 함수의 흐름을 개선함.